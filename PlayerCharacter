using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;

public class Player : MonoBehaviour
{
    public bool isHided;

    void Start()
    {
        isHided = false;
    }

    void Update()
    {

        Hide();
        Hide_check();

    }

    // 캐릭터가 Hide 상태인지 확인
    // 임시로 E / R을 통해 Hide 상태로 변환하게 뒀음!
    // 상호작용 구현시 여기 수정하면 될거에요~
    void Hide_check()
    {
        if (Input.GetKeyDown(KeyCode.E))
        {
            Debug.Log("e");
            isHided = true;
        }
        if (Input.GetKeyDown(KeyCode.R))
        //else
        {
            Debug.Log("pl");
            isHided = false;
        }
    }

    // 캐릭터가 Hide 상태일때 캐릭터의 tag를 변경해 Enemy가 추적하지 못하게 함
    void Hide()
    {
        if (isHided == true)
        {
            this.tag = "Hide";
        }
        else
        {
            this.tag = "Player";
        }
    }

    // Enemy에게 붙잡히면(닿으면) 게임오버 화면 출력
    private void OnCollisionEnter(Collision col)
    {
        if (col.gameObject.tag == "Enemy")
        {
            SceneManager.LoadScene("Gameover");
        }
    }
}
